//
// Created by guoshichao on 19-8-1.
//

#include <stdio.h>
#include "CircleBuf.h"

int main(int argc, char **argv) {
    CircleBuf *buf = new CircleBuf(10240);
    uint8_t testContent[] = {0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             0x01, 0x02, 0x01, 0x02,
                             };
    buf->writeBuf(testContent, 60);
    uint8_t content[30] = {0};
    int readCount = buf->readBuf(content, 20);
    printf("read count are %d\n", readCount);
    for (int i = 0; i < readCount; ++i) {
        printf("%02x ", content[i]);
    }
    printf("\n");


}

